"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _DepsGraph = _interopRequireDefault(require("./DepsGraph"));

var _scope = _interopRequireDefault(require("./scope"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class GraphBuilderState {
  scope = new _scope.default();
  graph = new _DepsGraph.default(this.scope);
  meta = new Map();
  callbacks = [];
  /*
   * For expressions like `{ foo: bar }` we need to now context
   *
   * const obj = { foo: bar };
   * Here context is `expression`, `bar` is a variable which depends from its declaration.
   *
   * const { foo: bar } = obj;
   * Here context is `pattern` and `bar` is a variable declaration itself.
   */

  context = [];
  fnStack = [];

  onVisit(callback) {
    this.callbacks.push(callback);
    return () => {
      this.callbacks = this.callbacks.filter(c => c !== callback);
    };
  }

}

exports.default = GraphBuilderState;
//# sourceMappingURL=GraphBuilderState.js.map