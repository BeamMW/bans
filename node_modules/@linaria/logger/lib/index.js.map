{"version":3,"file":"index.js","names":["levels","currentLevel","indexOf","process","env","LINARIA_LOG","linariaLogger","genericDebug","loggers","Map","gerOrCreate","namespace","lastIndexOf","has","set","substr","extend","get","format","text","replace","log","level","namespaces","arg1","restArgs","logger","enabled","debug","bind","info","warn","error","notify","message","console","pc","red","s","italic","substring","length"],"sources":["../src/index.ts"],"sourcesContent":["import genericDebug from 'debug';\nimport type { Debugger } from 'debug';\nimport pc from 'picocolors';\n\ntype LogLevel = 'error' | 'warn' | 'info' | 'debug';\n\nconst levels = ['error', 'warn', 'info', 'debug'];\nconst currentLevel = levels.indexOf(process.env.LINARIA_LOG || 'warn');\n\nconst linariaLogger = genericDebug('linaria');\n\nconst loggers = new Map<string, Debugger>();\n\nfunction gerOrCreate(namespace: string | null | undefined): Debugger {\n  if (!namespace) return linariaLogger;\n  const lastIndexOf = namespace.lastIndexOf(':');\n  if (!loggers.has(namespace)) {\n    loggers.set(\n      namespace,\n      gerOrCreate(namespace.substr(0, lastIndexOf)).extend(\n        namespace.substr(lastIndexOf + 1)\n      )\n    );\n  }\n\n  return loggers.get(namespace)!;\n}\n\nconst format = <T>(text: T) => {\n  if (typeof text === 'string') {\n    return text.replace(/\\n/g, '\\n\\t');\n  }\n\n  return text;\n};\n\nfunction log(\n  level: LogLevel,\n  namespaces: string,\n  arg1: unknown | (() => void),\n  ...restArgs: unknown[]\n) {\n  if (currentLevel < levels.indexOf(level)) {\n    return;\n  }\n\n  const logger = gerOrCreate(namespaces);\n  if (!logger.enabled) return;\n\n  if (typeof arg1 === 'function') {\n    const text = arg1();\n    if (text) {\n      logger('', format(text), ...restArgs);\n    }\n    return;\n  }\n\n  logger('', format(arg1), ...restArgs);\n}\n\nexport const debug = log.bind(null, 'debug');\nexport const info = log.bind(null, 'info');\nexport const warn = log.bind(null, 'warn');\nexport const error = log.bind(null, 'error');\n\nexport const notify = (message: string) => {\n  // eslint-disable-next-line no-console\n  console.log(\n    pc.red(\n      message.replace(/(`.*?`)/g, (s) =>\n        pc.italic(s.substring(1, s.length - 1))\n      )\n    )\n  );\n};\n"],"mappings":";;;;;;;AAAA;;AAEA;;;;AAIA,MAAMA,MAAM,GAAG,CAAC,OAAD,EAAU,MAAV,EAAkB,MAAlB,EAA0B,OAA1B,CAAf;AACA,MAAMC,YAAY,GAAGD,MAAM,CAACE,OAAP,CAAeC,OAAO,CAACC,GAAR,CAAYC,WAAZ,IAA2B,MAA1C,CAArB;AAEA,MAAMC,aAAa,GAAG,IAAAC,cAAA,EAAa,SAAb,CAAtB;AAEA,MAAMC,OAAO,GAAG,IAAIC,GAAJ,EAAhB;;AAEA,SAASC,WAAT,CAAqBC,SAArB,EAAqE;EACnE,IAAI,CAACA,SAAL,EAAgB,OAAOL,aAAP;EAChB,MAAMM,WAAW,GAAGD,SAAS,CAACC,WAAV,CAAsB,GAAtB,CAApB;;EACA,IAAI,CAACJ,OAAO,CAACK,GAAR,CAAYF,SAAZ,CAAL,EAA6B;IAC3BH,OAAO,CAACM,GAAR,CACEH,SADF,EAEED,WAAW,CAACC,SAAS,CAACI,MAAV,CAAiB,CAAjB,EAAoBH,WAApB,CAAD,CAAX,CAA8CI,MAA9C,CACEL,SAAS,CAACI,MAAV,CAAiBH,WAAW,GAAG,CAA/B,CADF,CAFF;EAMD;;EAED,OAAOJ,OAAO,CAACS,GAAR,CAAYN,SAAZ,CAAP;AACD;;AAED,MAAMO,MAAM,GAAOC,IAAJ,IAAgB;EAC7B,IAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;IAC5B,OAAOA,IAAI,CAACC,OAAL,CAAa,KAAb,EAAoB,MAApB,CAAP;EACD;;EAED,OAAOD,IAAP;AACD,CAND;;AAQA,SAASE,GAAT,CACEC,KADF,EAEEC,UAFF,EAGEC,IAHF,EAIE,GAAGC,QAJL,EAKE;EACA,IAAIxB,YAAY,GAAGD,MAAM,CAACE,OAAP,CAAeoB,KAAf,CAAnB,EAA0C;IACxC;EACD;;EAED,MAAMI,MAAM,GAAGhB,WAAW,CAACa,UAAD,CAA1B;EACA,IAAI,CAACG,MAAM,CAACC,OAAZ,EAAqB;;EAErB,IAAI,OAAOH,IAAP,KAAgB,UAApB,EAAgC;IAC9B,MAAML,IAAI,GAAGK,IAAI,EAAjB;;IACA,IAAIL,IAAJ,EAAU;MACRO,MAAM,CAAC,EAAD,EAAKR,MAAM,CAACC,IAAD,CAAX,EAAmB,GAAGM,QAAtB,CAAN;IACD;;IACD;EACD;;EAEDC,MAAM,CAAC,EAAD,EAAKR,MAAM,CAACM,IAAD,CAAX,EAAmB,GAAGC,QAAtB,CAAN;AACD;;AAEM,MAAMG,KAAK,GAAGP,GAAG,CAACQ,IAAJ,CAAS,IAAT,EAAe,OAAf,CAAd;;AACA,MAAMC,IAAI,GAAGT,GAAG,CAACQ,IAAJ,CAAS,IAAT,EAAe,MAAf,CAAb;;AACA,MAAME,IAAI,GAAGV,GAAG,CAACQ,IAAJ,CAAS,IAAT,EAAe,MAAf,CAAb;;AACA,MAAMG,KAAK,GAAGX,GAAG,CAACQ,IAAJ,CAAS,IAAT,EAAe,OAAf,CAAd;;;AAEA,MAAMI,MAAM,GAAIC,OAAD,IAAqB;EACzC;EACAC,OAAO,CAACd,GAAR,CACEe,mBAAA,CAAGC,GAAH,CACEH,OAAO,CAACd,OAAR,CAAgB,UAAhB,EAA6BkB,CAAD,IAC1BF,mBAAA,CAAGG,MAAH,CAAUD,CAAC,CAACE,SAAF,CAAY,CAAZ,EAAeF,CAAC,CAACG,MAAF,GAAW,CAA1B,CAAV,CADF,CADF,CADF;AAOD,CATM"}