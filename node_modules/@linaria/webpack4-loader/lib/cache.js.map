{"version":3,"file":"cache.js","names":["MemoryCache","cache","Map","get","key","Promise","resolve","set","value","memoryCache","getCacheInstance","cacheProvider","require","Error"],"sources":["../src/cache.ts"],"sourcesContent":["export interface ICache {\n  get: (key: string) => Promise<string>;\n  set: (key: string, value: string) => Promise<void>;\n}\n\n// memory cache, which is the default cache implementation in Linaria\n\nclass MemoryCache implements ICache {\n  private cache: Map<string, string> = new Map();\n\n  public get(key: string): Promise<string> {\n    return Promise.resolve(this.cache.get(key) ?? '');\n  }\n\n  public set(key: string, value: string): Promise<void> {\n    this.cache.set(key, value);\n    return Promise.resolve();\n  }\n}\n\nexport const memoryCache = new MemoryCache();\n\n/**\n * return cache instance from `options.cacheProvider`\n * @param cacheProvider string | ICache | undefined\n * @returns ICache instance\n */\nexport const getCacheInstance = async (\n  cacheProvider: string | ICache | undefined\n): Promise<ICache> => {\n  if (!cacheProvider) {\n    return memoryCache;\n  }\n  if (typeof cacheProvider === 'string') {\n    return require(cacheProvider);\n  }\n  if (\n    typeof cacheProvider === 'object' &&\n    'get' in cacheProvider &&\n    'set' in cacheProvider\n  ) {\n    return cacheProvider;\n  }\n  throw new Error(`Invalid cache provider: ${cacheProvider}`);\n};\n"],"mappings":";;;;;;;AAKA;AAEA,MAAMA,WAAN,CAAoC;EAC1BC,KAAK,GAAwB,IAAIC,GAAJ,EAAxB;;EAENC,GAAG,CAACC,GAAD,EAA+B;IAAA;;IACvC,OAAOC,OAAO,CAACC,OAAR,oBAAgB,KAAKL,KAAL,CAAWE,GAAX,CAAeC,GAAf,CAAhB,6DAAuC,EAAvC,CAAP;EACD;;EAEMG,GAAG,CAACH,GAAD,EAAcI,KAAd,EAA4C;IACpD,KAAKP,KAAL,CAAWM,GAAX,CAAeH,GAAf,EAAoBI,KAApB;IACA,OAAOH,OAAO,CAACC,OAAR,EAAP;EACD;;AAViC;;AAa7B,MAAMG,WAAW,GAAG,IAAIT,WAAJ,EAApB;AAEP;AACA;AACA;AACA;AACA;;;;AACO,MAAMU,gBAAgB,GAAG,MAC9BC,aAD8B,IAEV;EACpB,IAAI,CAACA,aAAL,EAAoB;IAClB,OAAOF,WAAP;EACD;;EACD,IAAI,OAAOE,aAAP,KAAyB,QAA7B,EAAuC;IACrC,OAAOC,OAAO,CAACD,aAAD,CAAd;EACD;;EACD,IACE,OAAOA,aAAP,KAAyB,QAAzB,IACA,SAASA,aADT,IAEA,SAASA,aAHX,EAIE;IACA,OAAOA,aAAP;EACD;;EACD,MAAM,IAAIE,KAAJ,CAAW,2BAA0BF,aAAc,EAAnD,CAAN;AACD,CAjBM"}