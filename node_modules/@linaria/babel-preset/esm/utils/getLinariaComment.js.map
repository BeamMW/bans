{"version":3,"file":"getLinariaComment.js","names":["pattern","getLinariaComment","path","remove","comments","node","leadingComments","idx","findIndex","comment","test","value","matched","match","filter","_","i","type","split","map"],"sources":["../../src/utils/getLinariaComment.ts"],"sourcesContent":["import type { Node } from '@babel/types';\n\nconst pattern = /^linaria (atomic-css|css|styled) (.+)$/;\n\nexport default function getLinariaComment(\n  path: { node: Node },\n  remove = true\n): ['css' | 'atomic-css' | 'styled' | null, ...(string | null)[]] {\n  const comments = path.node.leadingComments;\n  if (!comments) {\n    return [null, null, null, null];\n  }\n\n  const idx = comments.findIndex((comment) => pattern.test(comment.value));\n  if (idx === -1) {\n    return [null, null, null, null];\n  }\n\n  const matched = comments[idx].value.match(pattern);\n  if (!matched) {\n    return [null, null, null, null];\n  }\n\n  if (remove) {\n    // eslint-disable-next-line no-param-reassign\n    path.node.leadingComments = comments.filter((_, i) => i !== idx);\n  }\n\n  let type: 'css' | 'atomic-css' | 'styled' = 'styled';\n  if (matched[1] === 'css') {\n    type = 'css';\n  } else if (matched[1] === 'atomic-css') {\n    type = 'atomic-css';\n  }\n  return [type, ...matched[2].split(' ').map((i) => i || null)];\n}\n"],"mappings":"AAEA,MAAMA,OAAO,GAAG,wCAAhB;AAEA,eAAe,SAASC,iBAAT,CACbC,IADa,EAEbC,MAAM,GAAG,IAFI,EAGmD;EAChE,MAAMC,QAAQ,GAAGF,IAAI,CAACG,IAAL,CAAUC,eAA3B;;EACA,IAAI,CAACF,QAAL,EAAe;IACb,OAAO,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAAP;EACD;;EAED,MAAMG,GAAG,GAAGH,QAAQ,CAACI,SAAT,CAAoBC,OAAD,IAAaT,OAAO,CAACU,IAAR,CAAaD,OAAO,CAACE,KAArB,CAAhC,CAAZ;;EACA,IAAIJ,GAAG,KAAK,CAAC,CAAb,EAAgB;IACd,OAAO,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAAP;EACD;;EAED,MAAMK,OAAO,GAAGR,QAAQ,CAACG,GAAD,CAAR,CAAcI,KAAd,CAAoBE,KAApB,CAA0Bb,OAA1B,CAAhB;;EACA,IAAI,CAACY,OAAL,EAAc;IACZ,OAAO,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAAP;EACD;;EAED,IAAIT,MAAJ,EAAY;IACV;IACAD,IAAI,CAACG,IAAL,CAAUC,eAAV,GAA4BF,QAAQ,CAACU,MAAT,CAAgB,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,KAAKT,GAAhC,CAA5B;EACD;;EAED,IAAIU,IAAqC,GAAG,QAA5C;;EACA,IAAIL,OAAO,CAAC,CAAD,CAAP,KAAe,KAAnB,EAA0B;IACxBK,IAAI,GAAG,KAAP;EACD,CAFD,MAEO,IAAIL,OAAO,CAAC,CAAD,CAAP,KAAe,YAAnB,EAAiC;IACtCK,IAAI,GAAG,YAAP;EACD;;EACD,OAAO,CAACA,IAAD,EAAO,GAAGL,OAAO,CAAC,CAAD,CAAP,CAAWM,KAAX,CAAiB,GAAjB,EAAsBC,GAAtB,CAA2BH,CAAD,IAAOA,CAAC,IAAI,IAAtC,CAAV,CAAP;AACD"}