{"version":3,"sources":["../../src/utils/loadOptions.ts"],"names":["cosmiconfig","explorer","loadOptions","overrides","configFile","ignore","rules","rest","result","undefined","loadSync","searchSync","displayName","evaluate","action","require","default","test","config"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,aAAxB;AAOA,MAAMC,QAAQ,GAAGD,WAAW,CAAC,SAAD,CAA5B;AAEA,eAAe,SAASE,WAAT,CACbC,SAAiC,GAAG,EADvB,EAEW;AACxB,QAAM;AAAEC,IAAAA,UAAF;AAAcC,IAAAA,MAAd;AAAsBC,IAAAA,KAAtB;AAA6B,OAAGC;AAAhC,MAAyCJ,SAA/C;AAEA,QAAMK,MAAM,GACVJ,UAAU,KAAKK,SAAf,GACIR,QAAQ,CAACS,QAAT,CAAkBN,UAAlB,CADJ,GAEIH,QAAQ,CAACU,UAAT,EAHN;AAKA,SAAO;AACLC,IAAAA,WAAW,EAAE,KADR;AAELC,IAAAA,QAAQ,EAAE,IAFL;AAGLP,IAAAA,KAAK,EAAEA,KAAK,IAAI,CACd;AACE;AACA;AACAQ,MAAAA,MAAM,EAAEC,OAAO,CAAC,iBAAD,CAAP,CAA2BC;AAHrC,KADc,EAMd;AACE;AACAC,MAAAA,IAAI,EAAEZ,MAAM,IAAI,wBAFlB;AAGES,MAAAA,MAAM,EAAE;AAHV,KANc,CAHX;AAeL,QAAIN,MAAM,GAAGA,MAAM,CAACU,MAAV,GAAmB,IAA7B,CAfK;AAgBL,OAAGX;AAhBE,GAAP;AAkBD","sourcesContent":["import cosmiconfig from 'cosmiconfig';\nimport type { StrictOptions } from '../types';\n\nexport type PluginOptions = StrictOptions & {\n  configFile?: string;\n};\n\nconst explorer = cosmiconfig('linaria');\n\nexport default function loadOptions(\n  overrides: Partial<PluginOptions> = {}\n): Partial<StrictOptions> {\n  const { configFile, ignore, rules, ...rest } = overrides;\n\n  const result =\n    configFile !== undefined\n      ? explorer.loadSync(configFile)\n      : explorer.searchSync();\n\n  return {\n    displayName: false,\n    evaluate: true,\n    rules: rules ?? [\n      {\n        // FIXME: if `rule` is not specified in a config, `@linaria/shaker` should be added as a dependency\n        // eslint-disable-next-line import/no-extraneous-dependencies\n        action: require('@linaria/shaker').default,\n      },\n      {\n        // The old `ignore` option is used as a default value for `ignore` rule.\n        test: ignore ?? /[\\\\/]node_modules[\\\\/]/,\n        action: 'ignore',\n      },\n    ],\n    ...(result ? result.config : null),\n    ...rest,\n  };\n}\n"],"file":"loadOptions.js"}