{"version":3,"file":"processTemplateExpression.js","names":["processTemplateExpression","babel","stage","p","state","options","tagProcessor","getTagProcessor","quasis","expressions","collectTemplateDependencies","queue","push","path","dependencies"],"sources":["../../src/utils/processTemplateExpression.ts"],"sourcesContent":["import type { NodePath } from '@babel/traverse';\nimport type { TaggedTemplateExpression } from '@babel/types';\n\nimport type { Core } from '../babel';\nimport type { State, StrictOptions } from '../types';\n\nimport collectTemplateDependencies from './collectTemplateDependencies';\nimport getTagProcessor from './getTagProcessor';\n\nconst processTemplateExpression = (\n  babel: Core,\n  stage: 'extract' | 'preeval',\n  p: NodePath<TaggedTemplateExpression>,\n  state: State,\n  options: StrictOptions\n) => {\n  const tagProcessor = getTagProcessor(p, state, options);\n  if (tagProcessor === null) return;\n\n  if (stage === 'extract') {\n    const [quasis, expressions] = collectTemplateDependencies(\n      babel,\n      p,\n      state,\n      options\n    );\n\n    state.queue.push({\n      path: p,\n      quasis,\n      expressions,\n      dependencies: tagProcessor.dependencies,\n    });\n  }\n};\n\nexport default processTemplateExpression;\n"],"mappings":";;;;;;;AAMA;;AACA;;;;AAEA,MAAMA,yBAAyB,GAAG,CAChCC,KADgC,EAEhCC,KAFgC,EAGhCC,CAHgC,EAIhCC,KAJgC,EAKhCC,OALgC,KAM7B;EACH,MAAMC,YAAY,GAAG,IAAAC,wBAAA,EAAgBJ,CAAhB,EAAmBC,KAAnB,EAA0BC,OAA1B,CAArB;EACA,IAAIC,YAAY,KAAK,IAArB,EAA2B;;EAE3B,IAAIJ,KAAK,KAAK,SAAd,EAAyB;IACvB,MAAM,CAACM,MAAD,EAASC,WAAT,IAAwB,IAAAC,oCAAA,EAC5BT,KAD4B,EAE5BE,CAF4B,EAG5BC,KAH4B,EAI5BC,OAJ4B,CAA9B;IAOAD,KAAK,CAACO,KAAN,CAAYC,IAAZ,CAAiB;MACfC,IAAI,EAAEV,CADS;MAEfK,MAFe;MAGfC,WAHe;MAIfK,YAAY,EAAER,YAAY,CAACQ;IAJZ,CAAjB;EAMD;AACF,CAzBD;;eA2Bed,yB"}